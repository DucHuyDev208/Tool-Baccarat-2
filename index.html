<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Baccarat Helper</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #000;
      color: #fff;
      font-family: Arial, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .container {
      background: #111;
      border-radius: 20px;
      padding: 25px 30px;
      text-align: center;
      box-shadow: 0 0 30px #00fff2;
      border: 2px solid #00fff2;
      max-width: 480px;
      width: 95%;
    }

    h2, h3 {
      color: #00fff2;
      text-shadow: 0 0 10px #00fff2;
      margin-bottom: 10px;
    }

    button {
      margin: 6px;
      padding: 12px 18px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      font-size: 16px;
      color: #fff;
      transition: 0.2s;
    }
    button:hover { transform: scale(1.08); }

    .banker { background: #d32f2f; }
    .player { background: #1976d2; }
    .tie    { background: #388e3c; }
    .undo   { background: #ff9800; }
    .reset  { background: #777; }

    ul {
      list-style: none;
      padding: 0;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 12px;
    }
    li {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 4px;
      font-size: 14px;
      font-weight: bold;
      color: white;
    }
    .B { background: #d32f2f; }
    .P { background: #1976d2; }
    .T { background: #388e3c; }

    #prediction {
      font-size: 20px;
      margin: 15px 0;
      font-weight: bold;
    }
    .dot {
      display: inline-block;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      margin-left: 6px;
    }
    .dot.player { background: #1976d2; }
    .dot.banker { background: #d32f2f; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Baccarat Helper ðŸŽ²</h2>

    <!-- Dá»± Ä‘oÃ¡n -->
    <div id="prediction">ChÆ°a cÃ³ dá»¯ liá»‡u</div>

    <!-- CÃ¡c nÃºt -->
    <div>
      <button class="banker" onclick="addResult('B')">Banker</button>
      <button class="player" onclick="addResult('P')">Player</button>
      <button class="tie" onclick="addResult('T')">Tie</button>
      <button class="undo" onclick="undo()">Undo</button>
      <button class="reset" onclick="resetGame()">Reset</button>
    </div>

    <h3>Lá»‹ch sá»­</h3>
    <ul id="history"></ul>
  </div>

  <script>
    let results = [];

    function addResult(r) {
      results.push(r);
      renderHistory();
      predict();
    }

    function renderHistory() {
      const historyEl = document.getElementById("history");
      historyEl.innerHTML = "";
      results.forEach(r => {
        const li = document.createElement("li");
        li.textContent = r;
        li.className = r;
        historyEl.appendChild(li);
      });
    }

    // ðŸ”¥ Thuáº­t toÃ¡n Markov Chain + Streak Bias
    function predict() {
      const predEl = document.getElementById("prediction");

      if (results.length < 3) {
        predEl.textContent = "ChÆ°a Ä‘á»§ dá»¯ liá»‡u";
        return;
      }

      let last = results[results.length - 1];

      // Kiá»ƒm tra streak (bá»‡t)
      let streak = 1;
      for (let i = results.length - 2; i >= 0; i--) {
        if (results[i] === last && last !== "T") streak++;
        else break;
      }

      if (streak >= 3) {
        // Náº¿u bá»‡t >= 3 â†’ theo bá»‡t
        if (last === "B") {
          predEl.innerHTML = 'Dá»± Ä‘oÃ¡n: Banker <span class="dot banker"></span>';
        } else {
          predEl.innerHTML = 'Dá»± Ä‘oÃ¡n: Player <span class="dot player"></span>';
        }
        return;
      }

      // Markov Chain (Ä‘áº¿m xÃ¡c suáº¥t chuyá»ƒn tráº¡ng thÃ¡i)
      let transitions = { B: { B: 0, P: 0 }, P: { B: 0, P: 0 } };

      for (let i = 0; i < results.length - 1; i++) {
        let cur = results[i];
        let next = results[i + 1];
        if ((cur === "B" || cur === "P") && (next === "B" || next === "P")) {
          transitions[cur][next]++;
        }
      }

      let lastChoice = results[results.length - 1];
      if (lastChoice === "B" || lastChoice === "P") {
        let counts = transitions[lastChoice];
        let next = counts.B >= counts.P ? "B" : "P";

        if (next === "B") {
          predEl.innerHTML = 'Dá»± Ä‘oÃ¡n: Banker <span class="dot banker"></span>';
        } else {
          predEl.innerHTML = 'Dá»± Ä‘oÃ¡n: Player <span class="dot player"></span>';
        }
      } else {
        predEl.textContent = "Cáº§u chÆ°a rÃµ";
      }
    }

    function undo() {
      results.pop();
      renderHistory();
      predict();
    }

    function resetGame() {
      results = [];
      document.getElementById("history").innerHTML = "";
      document.getElementById("prediction").textContent = "ChÆ°a cÃ³ dá»¯ liá»‡u";
    }
  </script>
</body>
</html>
