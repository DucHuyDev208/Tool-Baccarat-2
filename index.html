<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Baccarat Helper üé≤</title>
<style>
body{
  background:#000;
  color:#fff;font-family:"Segoe UI",sans-serif;text-align:center;
  margin:0;padding:20px;
}
h2{color:#00eaff;margin-bottom:5px;}
#suggest{
  font-size:1.5em;font-weight:bold;
  padding:12px 18px;margin:15px auto;
  border:2px solid #00eaff;border-radius:12px;
  display:inline-block;background:#111;box-shadow:0 0 15px #00eaff55;
}
button{
  margin:6px;padding:12px 20px;font-size:1em;font-weight:600;
  border-radius:8px;border:none;cursor:pointer;
  transition:all .25s;min-width:90px;
}
button:hover{transform:scale(1.05);}
.btn-b{background:#e74c3c;color:#fff;}
.btn-p{background:#3498db;color:#fff;}
.btn-t{background:#2ecc71;color:#fff;}
.btn-undo{background:#f39c12;color:#fff;}
.btn-reset{background:#7f8c8d;color:#fff;}
#history{
  display:flex;flex-wrap:wrap;justify-content:center;
  background:#111;padding:12px;border-radius:12px;
  min-height:50px;margin-top:15px;box-shadow:inset 0 0 10px #000;
}
#history span{
  width:28px;height:28px;line-height:28px;
  margin:4px;border-radius:50%;font-size:0.9em;
  font-weight:bold;color:#fff;display:inline-block;
}
</style>
</head>
<body>
<h2>Baccarat Helper üé≤</h2>

<p id="suggest">D·ª± ƒëo√°n: Ch∆∞a c√≥ d·ªØ li·ªáu</p>

<div>
  <button class="btn-b" onclick="add('B')">Banker</button>
  <button class="btn-p" onclick="add('P')">Player</button>
  <button class="btn-t" onclick="add('T')">Tie</button>
  <button class="btn-undo" onclick="undo()">Undo</button>
  <button class="btn-reset" onclick="resetAll()">Reset</button>
</div>

<h3>L·ªãch s·ª≠</h3>
<div id="history">Ch∆∞a c√≥ d·ªØ li·ªáu</div>

<script>
var priors={B:0.4586,P:0.4462,T:0.0952};
var seq=JSON.parse(localStorage.getItem("baccarat_seq")||"[]");

function byId(id){return document.getElementById(id);}
function save(){localStorage.setItem("baccarat_seq",JSON.stringify(seq));}
function renderHistory(){
  var h=byId('history');
  if(seq.length===0){h.textContent='Ch∆∞a c√≥ d·ªØ li·ªáu';return;}
  var html='';
  for(var i=0;i<seq.length;i++){
    var c=seq[i]==='B'?'#e74c3c':seq[i]==='P'?'#3498db':'#2ecc71';
    html+='<span style="background:'+c+'">'+seq[i]+'</span>';
  }
  h.innerHTML=html;
}
function probsFrequency(){
  var k=10,c={B:priors.B*k,P:priors.P*k,T:priors.T*k};
  for(var i=0;i<seq.length;i++){c[seq[i]]++;}
  var t=c.B+c.P+c.T;
  return {B:c.B/t,P:c.P/t,T:c.T/t};
}
function probsMarkov(){
  var M={B:{B:1,P:1,T:1},P:{B:1,P:1,T:1},T:{B:1,P:1,T:1}};
  for(var i=1;i<seq.length;i++){M[seq[i-1]][seq[i]]++;}
  var last=seq[seq.length-1];
  if(!last){return priors;}
  var r=M[last],s=r.B+r.P+r.T;
  return {B:r.B/s,P:r.P/s,T:r.T/s};
}
function combine(){
  var f=probsFrequency(),m=probsMarkov();
  var B=Math.pow(priors.B*f.B*m.B,1/3);
  var P=Math.pow(priors.P*f.P*m.P,1/3);
  var T=Math.pow(priors.T*f.T*m.T,1/3);
  var s=B+P+T;
  return {B:B/s,P:P/s,T:T/s};
}
function updateSuggest(){
  if(seq.length===0){
    byId('suggest').textContent='D·ª± ƒëo√°n: Ch∆∞a c√≥ d·ªØ li·ªáu';
    return;
  }
  var p=combine();
  var best='B';if(p.P>p[best])best='P';if(p.T>p[best])best='T';
  var name=best==='B'?'Banker':best==='P'?'Player':'Tie';
  byId('suggest').textContent='D·ª± ƒëo√°n: '+name;
}
function add(x){seq.push(x);save();renderHistory();updateSuggest();}
function undo(){if(seq.length>0){seq.pop();save();renderHistory();updateSuggest();}}
function resetAll(){seq=[];save();renderHistory();updateSuggest();}
renderHistory();updateSuggest();
</script>
</body>
</html>
