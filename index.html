<!DOCTYPE html><html lang="vi"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Baccarat Logic AI 6.0</title><script>(function(){const h='duchuydev208.github.io',p='/Help-Casino-Plus/';if(location.host!==h||!location.pathname.startsWith(p))window.location.href='https://'+h+p;})();</script><style>:root{--cyan:#00e0ff;--teal:#00ffaa;--bg:#0f1214;--fg:#ffffff;--muted:#bcdbea;--red:#ff4444;--blue:#0080ff}*{box-sizing:border-box}body{background:#000;color:var(--fg);font-family:Inter,Arial,sans-serif;display:flex;flex-direction:column;align-items:center;min-height:100vh;margin:0;padding:10px}.container{border:3px solid var(--cyan);border-radius:16px;padding:16px;max-width:720px;width:100%;box-shadow:0 0 30px rgba(0,224,255,0.12);background:var(--bg)}h1{background:linear-gradient(90deg,var(--cyan),var(--teal));-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:26px;margin:0 0 10px 0;text-align:center}.main-pred{font-size:18px;font-weight:800;margin:12px 0;padding:12px;border-radius:12px;border:2px solid var(--cyan);background:linear-gradient(180deg, rgba(0,224,255,0.06), rgba(0,170,255,0.02));display:flex;justify-content:space-between;align-items:center;gap:12px;min-height:86px}.main-left{display:flex;flex-direction:column;gap:6px;flex:1}.main-title{font-weight:900;font-size:18px}.main-sub{font-size:13px;color:var(--muted)}#patternType{min-height:18px;color:var(--muted);} .badgebar{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px;min-height:28px;align-items:center}.badge{font-size:11px;font-weight:800;padding:6px 10px;border-radius:999px;border:1px solid transparent;text-align:center;line-height:1}.b-pair{min-width:70px}.b-streak{background:rgba(255,68,68,.12);color:#ff7777;border-color:rgba(255,68,68,.2)}.b-alt{background:rgba(0,128,255,.10);color:#6fc6ff;border-color:rgba(0,128,255,.18)}.b-pair{background:rgba(255,211,107,.12);color:#ffd36b;border-color:rgba(255,211,107,.2);min-width:70px}.b-trend{background:rgba(0,255,179,.10);color:#95ffde;border-color:rgba(0,255,179,.2)}.b-messy{background:rgba(255,255,255,.06);color:#d4e7f5;border-color:rgba(255,255,255,.12)}.controls{display:flex;gap:8px;justify-content:center;align-items:center;margin:10px 0;flex-wrap: nowrap;}button{flex: 0 1 auto;min-width: 90px;height: 36px;padding: 4px 8px;border-radius: 8px;border: none;font-weight: 800;font-size: 13px;cursor: pointer;display:flex;align-items:center;justify-content:center}.btn-banker{background:var(--red); color:#fff}.btn-player{background:var(--blue); color:#fff}.btn-undo{background:#666; color:#fff}.btn-reset{background:#00aaff; color:#08202a}.methods{display:none}.history-box{border:2px solid var(--cyan);border-radius:16px;padding:16px;margin-top:16px;background:var(--bg);box-shadow:0 0 20px rgba(0,224,255,0.08);max-width:720px;width:100%}.history-box h2{text-align:center;font-size:18px;margin-top:0;margin-bottom:12px;color:var(--cyan)}.history{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin:12px 0}.circle{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:900;color:#fff;box-shadow:0 2px 10px rgba(0,0,0,0.6)}.banker{background:var(--red)}.player{background:var(--blue)}@media(max-width:480px){.controls{overflow-x:auto;padding-bottom:6px}} </style></head><body><div class="container" role="application"><h1>Baccarat Logic AI 6.0</h1><div class="main-pred" id="mainPredBox"><div class="main-left"><div id="mainPrediction" class="main-title">Ch·ªù d·ªØ li·ªáu...</div><div id="patternType" class="main-sub">‚Äî</div><div class="badgebar" id="patternBadges" aria-hidden="false"></div><div id="breakRatio" class="main-sub">T·ªâ l·ªá b·∫ª c·∫ßu: ‚Äî</div></div><div class="right"><div id="voteDetail" class="small">‚Äî</div></div></div><div class="controls" role="toolbar"><button class="btn-banker" onclick="Z('B')">Banker üî¥</button><button class="btn-player" onclick="Z('P')">Player üîµ</button><button class="btn-undo" onclick="Y()">‚Ü∂ Undo</button><button class="btn-reset" onclick="X()">‚ôªÔ∏è Reset</button></div></div><div class="history-box"><h2>L·ªãch s·ª≠ k·∫øt qu·∫£</h2><div class="history" id="h" aria-live="polite"></div><div class="methods" id="m"></div></div><script>const a="baccarat_logic_ai_v2";let b=[];try{const e=localStorage.getItem(a);history= e?JSON.parse(e):[];b=Array.isArray(history)?history:[];}catch(e){b=[];console.warn('localStorage ƒë·ªçc l·ªói, d√πng m·∫£ng r·ªóng',e);}function c(){try{localStorage.setItem(a,JSON.stringify(b));}catch(e){console.warn('Kh√¥ng l∆∞u ƒë∆∞·ª£c localStorage',e);}}const d=(e,f)=>e.slice(Math.max(0,e.length-f)),g=e=>({B:e.filter(x=>"B"===x).length,P:e.filter(x=>"P"===x).length});function h(e){if(!e.length)return{side:null,len:0};let s=e[e.length-1],len=1;for(let i=e.length-2;i>=0;i--){if(e[i]===s)len++;else break;}return{side:s,len:len}}function i(e,n=6){const seg=d(e,n);if(seg.length<3)return false;for(let i=0;i<seg.length-1;i++)if(seg[i]===seg[i+1])return false;return true;}function j(e,side){if(!e.length)return 0;let streaks=[],curr=e[0],c=1;for(let i=1;i<e.length;i++){if(e[i]===curr)c++;else{streaks.push({side:curr,len:c});curr=e[i];c=1;}}streaks.push({side:curr,len:c});const lens=streaks.filter(s=>s.side===side).map(s=>s.len);if(!lens.length)return 0;return lens.reduce((a,b)=>a+b,0)/lens.length;}function k(e){const seg=d(e,8);let streaks=[],curr=null,c=0;seg.forEach(v=>{if(v!==curr){if(curr!==null)streaks.push({side:curr,len:c});curr=v;c=1;}else c++;});if(curr!==null)streaks.push({side:curr,len:c});if(streaks.length<2)return null;const lastTwo=streaks.slice(-2);const l1=lastTwo[0].len,l2=lastTwo[1].len;if(l1===1&&l2===1)return' C·∫∑p 1-1'.trim();if(l1===2&&l2===2)return' C·∫∑p 2-2'.trim();if(l1===3&&l2===3)return' C·∫∑p 3-3'.trim();return null;}function l(e){const N=Math.min(10,e.length);const seg=d(e,N);const cts=g(seg);if(N>=6){if(cts.B>=Math.ceil(0.7*N))return'Trend Banker m·∫°nh';if(cts.P>=Math.ceil(0.7*N))return'Trend Player m·∫°nh';}return null;}function m(e){if(e.length<6)return false;let bcount=0;for(let i=1;i<e.length;i++)if(e[i]!==e[i-1])bcount++;return (bcount/(e.length-1))>=0.75;}function n(e){if(e.length<2)return 0;let bcount=0;for(let i=1;i<e.length;i++)if(e[i]!==e[i-1])bcount++;return Math.round((bcount/(e.length-1))*100);}function o(e){if(!e.length)return{name:'RunType',type:null,pred:null};if(i(e,6))return{name:'RunType',type:'Alternation',pred:e[e.length-1]==='B'?'P':'B'};const st=h(e);if(st.len>=3)return{name:'RunType',type:'Streak',pred:st.side};if(e.length>=6){const a=e.slice(-6,-3).join(''),b=e.slice(-3).join('');if(a===b)return{name:'RunType',type:'Mirror',pred:e[e.length-3]||null}}const trend=l(e);if(trend)return{name:'RunType',type:trend.indexOf('Banker')>=0?'Trend-B':'Trend-P',pred:trend.indexOf('Banker')>=0?'B':'P'};const avg=j(e,st.side);if(avg>=2&&st.len<Math.round(avg))return{name:'RunType',type:'Pattern-Length',pred:st.side};const last6=d(e,6);const c= g(last6);if(c.B!==c.P)return{name:'RunType',type:'Mixed-Majority',pred:c.B>c.P?'B':'P'};return{name:'RunType',type:'Mixed',pred:null}}function p(e){return e.length?e[e.length-1]:null}function q(e){return e.length?(e[e.length-1]==='B'?'P':'B'):null}function r(e){if(e.length<2)return null;const trans={B:{B:0,P:0},P:{B:0,P:0}};for(let i=0;i<e.length-1;i++)trans[e[i]][e[i+1]]++;const last=e[e.length-1];return trans[last].B>=trans[last].P?'B':'P'}function s(e){if(!e.length)return null;const c=g(e);return c.B>=c.P?'B':'P'}function t(e){if(e.length<3)return null;const c=g(d(e,3));return c.B>1?'B':'P'}function u(e){return e.length<4?null:e[e.length-4]||null}function v(e){if(e.length<2)return null;let streak=1;for(let i=e.length-2;i>=0;i--){if(e[i]===e[i+1])streak++;else break;}return streak>=2?e[e.length-1]:(e[e.length-1]==='B'?'P':'B')}function w(e){const subs=[p,q,s,t];const votes=[];for(let i=0;i<subs.length;i++){const r=subs[i](e);if(r)votes.push(r);}if(!votes.length)return null;const ct=g(votes);return ct.B>=ct.P?'B':'P'}function x(e){if(e.length<4)return null;const c=g(d(e,4));return c.B>=c.P?'B':'P'}function y(e){if(e.length<6)return null;const seg=d(e,3).join('');for(let i=0;i<=e.length-4;i++)if(e.slice(i,i+3).join('')===seg)return e[i+3]||null;return null}const ALL_METHODS=[["RunType",o],["Hybrid",w],["Frequency",s],["Streak",p],["Pattern",v],["Momentum",t],["Markov",r],["Trend",x],["Alternation",q],["Mirror",u],["History",y]];const WINDOW=100;function methodAccuracyOver(histArr,methodFn,isRunType=false,window=WINDOW){let start=Math.max(1,histArr.length-window);let correct=0,total=0;for(let i=start;i<histArr.length;i++){const past=histArr.slice(0,i);let pred=null;try{if(isRunType){const obj=methodFn(past);pred=obj&&obj.pred?obj.pred:null;}else pred=methodFn(past);}catch(e){pred=null;}if(pred){total++;if(pred===histArr[i])correct++;}}return{correct,total,acc:total>0?(correct/total):0}}function computeWeights(histArr){const weights={};ALL_METHODS.forEach(([name,fn])=>{const isRT=name==='RunType';const res=methodAccuracyOver(histArr,fn,isRT,WINDOW);const w=(0.5+0.5*res.acc)*Math.log(1+res.total+1);weights[name]=w});return weights}function weightedVote(histArr,weights){let score={B:0,P:0};ALL_METHODS.forEach(([name,fn])=>{const isRT=name==='RunType';let res=null;try{res=isRT?(fn(histArr).pred||null):fn(histArr);}catch(e){res=null;}if(res)score[res]+=(weights[name]||1)});const total=score.B+score.P;const final=score.B>=score.P?'B':'P';const pct=total>0?Math.round((score[final]/total)*100):0;return{final,pct,score,total}}function renderBadges(){const bar=document.getElementById('patternBadges');bar.innerHTML='';if(!b.length)return;const st= h(b);if(st.len>=3){const sp=document.createElement('span');sp.className='badge b-streak';sp.textContent=`B·ªát ${st.side==='B'?'Banker':'Player'} ${st.len}`;bar.appendChild(sp);}if(i(b,6)){const sp=document.createElement('span');sp.className='badge b-alt';sp.textContent='Xen k·∫Ω 1-1';bar.appendChild(sp);}const pair=k(b);if(pair){const sp=document.createElement('span');sp.className='badge b-pair';sp.textContent=pair;bar.appendChild(sp);}const tr=l(b);if(tr){const sp=document.createElement('span');sp.className='badge b-trend';sp.textContent=tr;bar.appendChild(sp);}if(m(b)){const sp=document.createElement('span');sp.className='badge b-messy';sp.textContent='C·∫ßu l·ªôn x·ªôn';bar.appendChild(sp);}}function renderHistory(){const el=document.getElementById('h');el.innerHTML='';b.forEach((r,i)=>{const d=document.createElement('div');d.className='circle '+(r==='B'?'banker':'player');d.textContent=r;d.title=`${i+1}. ${r==='B'?'Banker':'Player'}`;el.appendChild(d);});const br=n(b);document.getElementById('breakRatio').textContent=b.length>1?`T·ªâ l·ªá b·∫ª c·∫ßu: ${br}%`:'T·ªâ l·ªá b·∫ª c·∫ßu: ‚Äî';renderBadges()}function renderMethodsAndMain(){const weights=computeWeights(b);const vote=weightedVote(b,weights);const main=document.getElementById('mainPrediction');const voteDetail=document.getElementById('voteDetail');const patternTypeEl=document.getElementById('patternType');if(!b.length){main.textContent='Ch·ªù d·ªØ li·ªáu...';voteDetail.textContent='‚Äî';patternTypeEl.textContent='‚Äî';}else{main.textContent=`${vote.final==='B'?'üî¥ Banker':'üîµ Player'} (${vote.pct}%)`;voteDetail.textContent=`B=${(vote.score.B).toFixed(2)} ‚Ä¢ P=${(vote.score.P).toFixed(2)}`;const rt=o(b);patternTypeEl.textContent='Lo·∫°i c·∫ßu: '+(rt&&rt.type?rt.type:'‚Äî');}const methodsEl=document.getElementById('m');if(methodsEl){methodsEl.innerHTML='';ALL_METHODS.forEach(([name,fn])=>{const isRT=name==='RunType';const res=methodAccuracyOver(b,fn,isRT,WINDOW);const row=document.createElement('div');row.textContent=`${name}: acc=${(res.acc*100).toFixed(0)}% (${res.correct}/${res.total})`;methodsEl.appendChild(row);});}}function addResult(r){if(r!=='B'&&r!=='P')return;b.push(r);c();renderHistory();renderMethodsAndMain()}function undo(){if(!b.length)return;b.pop();c();renderHistory();renderMethodsAndMain()}function resetHistory(){if(!confirm('X√°c nh·∫≠n reset ‚Äî to√†n b·ªô l·ªãch s·ª≠ s·∫Ω b·ªã xo√°?'))return;b=[];c();renderHistory();renderMethodsAndMain()}// initial render and error handlersrenderHistory();renderMethodsAndMain();window.addEventListener('error',function(e){console.error('JS error:',e.error||e.message||e);});window.addEventListener('unhandledrejection',function(e){console.error('Unhandled rejection:',e.reason||e);});window.Z=addResult;window.Y=undo;window.X=resetHistory;</script></body></html>      for (let i = results.length - 2; i >= 0; i--) {
        if (results[i] === last && last !== "T") streak++;
        else break;
      }

      if (streak >= 3) {
        // N·∫øu b·ªát >= 3 ‚Üí theo b·ªát
        if (last === "B") {
          predEl.innerHTML = 'D·ª± ƒëo√°n: Banker <span class="dot banker"></span>';
        } else {
          predEl.innerHTML = 'D·ª± ƒëo√°n: Player <span class="dot player"></span>';
        }
        return;
      }

      // Markov Chain (ƒë·∫øm x√°c su·∫•t chuy·ªÉn tr·∫°ng th√°i)
      let transitions = { B: { B: 0, P: 0 }, P: { B: 0, P: 0 } };

      for (let i = 0; i < results.length - 1; i++) {
        let cur = results[i];
        let next = results[i + 1];
        if ((cur === "B" || cur === "P") && (next === "B" || next === "P")) {
          transitions[cur][next]++;
        }
      }

      let lastChoice = results[results.length - 1];
      if (lastChoice === "B" || lastChoice === "P") {
        let counts = transitions[lastChoice];
        let next = counts.B >= counts.P ? "B" : "P";

        if (next === "B") {
          predEl.innerHTML = 'D·ª± ƒëo√°n: Banker <span class="dot banker"></span>';
        } else {
          predEl.innerHTML = 'D·ª± ƒëo√°n: Player <span class="dot player"></span>';
        }
      } else {
        predEl.textContent = "C·∫ßu ch∆∞a r√µ";
      }
    }

    function undo() {
      results.pop();
      renderHistory();
      predict();
    }

    function resetGame() {
      results = [];
      document.getElementById("history").innerHTML = "";
      document.getElementById("prediction").textContent = "Ch∆∞a c√≥ d·ªØ li·ªáu";
    }
  </script>
</body>
</html>
